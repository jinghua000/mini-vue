<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app"></div>
</body>
<script src="./dist/mini-vue.umd.js"></script>
<script>
const { h, render } = Vue
const app = document.getElementById('app')

function random(min, max) {
    return (min + (max - min + 1) * Math.random()) | 0
}

function shuffle(arr) {
    let length = arr.length
    let i = 0

    while (i < length) {
        let next = random(i, length - 1)
        ;[arr[i], arr[next]] = [arr[next], arr[i]]
        i++
    }

    return arr
}

function genchildren(text) {
    const children = Array(10)
    for (let i = 0; i < children.length; i++) {
        children[i] = h('div', { key: `child-${i}` }, `${text}-${i}`)
    }

    return children
}


let vnode = h('div', null, genchildren('text'))
render(vnode, app)
const els = vnode.children.map(child => child.el)
let children = []

setTimeout(() => {
    console.log('change!')
    children = shuffle(genchildren('changed'))
    // const ext1 = h('div', { key: 98}, `ext-98`)
    // const ext2 = h('div', { key: 99}, `ext-99`)

    vnode = h('div', null, children)
    render(vnode, app)
}, 2000)
</script>
</html>